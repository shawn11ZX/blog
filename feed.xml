<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Dizzy Land</title>
    <description>Shawn Zhang&#39;s blog
</description>
    <link>http://127.0.0.1:4000/</link>
    <atom:link href="http://127.0.0.1:4000/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Tue, 10 May 2016 12:58:45 +0000</pubDate>
    <lastBuildDate>Tue, 10 May 2016 12:58:45 +0000</lastBuildDate>
    <generator>Jekyll v3.1.3</generator>
    
      <item>
        <title>Security Notes</title>
        <description>&lt;div id=&quot;preamble&quot;&gt;
&lt;div class=&quot;sectionbody&quot;&gt;
&lt;div id=&quot;toc&quot; class=&quot;toc&quot;&gt;
&lt;div id=&quot;toctitle&quot; class=&quot;title&quot;&gt;Table of Contents&lt;/div&gt;
&lt;ul class=&quot;sectlevel3&quot;&gt;
&lt;li&gt;&lt;a href=&quot;#重要的定义&quot;&gt;1. 重要的定义&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#密码学&quot;&gt;2. 密码学&lt;/a&gt;
&lt;ul class=&quot;sectlevel4&quot;&gt;
&lt;li&gt;&lt;a href=&quot;#特点&quot;&gt;特点&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#应用&quot;&gt;应用&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#对称加密&quot;&gt;3. 对称加密&lt;/a&gt;
&lt;ul class=&quot;sectlevel4&quot;&gt;
&lt;li&gt;&lt;a href=&quot;#特点-2&quot;&gt;特点&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#常见的算法&quot;&gt;常见的算法&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#流程&quot;&gt;流程&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#非对称加密&quot;&gt;4. 非对称加密&lt;/a&gt;
&lt;ul class=&quot;sectlevel4&quot;&gt;
&lt;li&gt;&lt;a href=&quot;#特点-3&quot;&gt;特点&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#常见算法&quot;&gt;常见算法&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#流程-2&quot;&gt;流程&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#认证public-key&quot;&gt;认证public key&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#hash&quot;&gt;5. Hash&lt;/a&gt;
&lt;ul class=&quot;sectlevel4&quot;&gt;
&lt;li&gt;&lt;a href=&quot;#常见算法-2&quot;&gt;常见算法&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#流程-3&quot;&gt;流程&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#mac&quot;&gt;6. MAC&lt;/a&gt;
&lt;ul class=&quot;sectlevel4&quot;&gt;
&lt;li&gt;&lt;a href=&quot;#流程-4&quot;&gt;流程&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#digital-signature&quot;&gt;7. Digital Signature&lt;/a&gt;
&lt;ul class=&quot;sectlevel4&quot;&gt;
&lt;li&gt;&lt;a href=&quot;#常见算法-3&quot;&gt;常见算法&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#流程-5&quot;&gt;流程&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;重要的定义&quot;&gt;1. 重要的定义&lt;/h4&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Plain text(Clear text): 未加密的消息&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Cipher: 加密算法&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Encryption: 加密, 利用Cipher变化Data的过程&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Cryptography: 密码学, 利用Cipher加密或解密消息&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Credential: 就是密码（可以是文本，指纹等形式）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Authentication: 认证，证明你是你&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Authorization: 授权，有时候又叫privilege，决定你能干嘛&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Bit Strength: 度量Cryptographic算法破解难度的单位，和&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Key size(Key length): key的长度，和Bit Strength可能相同也可能不同。RSA Key length/Key size of 2048 bits has a Bit Strength of 112 bits.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Hash(digest/fingerprint)：将无穷大的数据，变成&lt;strong&gt;唯一/固定长度/很小&lt;/strong&gt; 的数据的过程。就像用人的指纹代表整个人。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;密码学&quot;&gt;2. 密码学&lt;/h4&gt;
&lt;div class=&quot;sect4&quot;&gt;
&lt;h5 id=&quot;特点&quot;&gt;特点&lt;/h5&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;假定Attacker知道算法而不知道密钥&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;理论上可以暴力破解，但是用computationally infeasible保证不被破解，而且随着计算能力的提升，computationally infeasible会改变&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;破解成功的人往往不会主动宣布自己破解了，因此需要temper proof或temper aware环境，或者定时修改密钥&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect4&quot;&gt;
&lt;h5 id=&quot;应用&quot;&gt;应用&lt;/h5&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;confidentiality(机密性)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;authentication 认证&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;integrity 完整性&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;对称加密&quot;&gt;3. 对称加密&lt;/h4&gt;
&lt;div class=&quot;sect4&quot;&gt;
&lt;h5 id=&quot;特点-2&quot;&gt;特点&lt;/h5&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Symmetric encryption, single­key, shared­secret, private­key systems, 使用一个（组）key加解密&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;一旦key泄露影响所有的人&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;加密比非对称加密效率高，一般是加密bulk data streams的唯一方法&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;常见key size: 64, 128, 192 or 256 bits.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect4&quot;&gt;
&lt;h5 id=&quot;常见的算法&quot;&gt;常见的算法&lt;/h5&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;DES (Data Encryption Standard a.k.a Data Encryption Algorithm (DEA),&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Triple DES (TDES a.k.a. TDEA (Triple Data Encryption Algorithm)),&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;AES (Advanced Encryption Standard),&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;IDEA (International Data encryption Algorithm)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;RC4 (Rivest Cipher 4 ­ as of 2013 regarded as capable of being cracked,&lt;br&gt;
though attacks not yet proven or published)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect4&quot;&gt;
&lt;h5 id=&quot;流程&quot;&gt;流程&lt;/h5&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;img src=&quot;/images/Symmetric-Cryptography.png&quot; alt=&quot;Symmetric Cryptography&quot;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;非对称加密&quot;&gt;4. 非对称加密&lt;/h4&gt;
&lt;div class=&quot;sect4&quot;&gt;
&lt;h5 id=&quot;特点-3&quot;&gt;特点&lt;/h5&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Asymmetric encryption algorithms, public­key cryptographic&lt;br&gt;
systems, nonsecret encryption, 使用一对key: a public and a private key&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;效率低&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;一般not used to encrypt bulk data streams.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect4&quot;&gt;
&lt;h5 id=&quot;常见算法&quot;&gt;常见算法&lt;/h5&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;RSA (after the  inventors Rivest, Shamir, and Adelman)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;DSA (Digital Signature Algorithm)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Elliptic Curve Cryptography (ECC)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect4&quot;&gt;
&lt;h5 id=&quot;流程-2&quot;&gt;流程&lt;/h5&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;img src=&quot;/images/Asymmetric-Cryptography.png&quot; alt=&quot;Asymmetric Cryptography&quot;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect4&quot;&gt;
&lt;h5 id=&quot;认证public-key&quot;&gt;认证public key&lt;/h5&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;A Public Key Infrastructure (PKI), trusted third party (CA).&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;hash&quot;&gt;5. Hash&lt;/h4&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;生成fingerprint保证integrity，问题是如何保证digest本身的integrity&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;To provide data integrity, any message could be simply encrypted. 但是太费CPU，可以通过Hash达到相同效果。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class=&quot;sect4&quot;&gt;
&lt;h5 id=&quot;常见算法-2&quot;&gt;常见算法&lt;/h5&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;MD5 (Message Digest 5)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;SHA­1&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;SHA­2 family: SHA­224, SHA­256, SHA­384 and SHA­512&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect4&quot;&gt;
&lt;h5 id=&quot;流程-3&quot;&gt;流程&lt;/h5&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;img src=&quot;/images/Message-Digest.png&quot; alt=&quot;Message Digest&quot;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;mac&quot;&gt;6. MAC&lt;/h4&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Message Authentication Code&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;保证integerity和authentication&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Digest+key，Digest保证integrity，key保证authentication&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;有两种&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;CMAC（Cipher-based），使用对称加密&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;HMAC（hash-based），使用hash（更常用）&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class=&quot;sect4&quot;&gt;
&lt;h5 id=&quot;流程-4&quot;&gt;流程&lt;/h5&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;img src=&quot;/images/MAC.png&quot; alt=&quot;MAC&quot;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;digital-signature&quot;&gt;7. Digital Signature&lt;/h4&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;同MAC一样，也是为了保证integerity和authentication&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;先将message digest，再将digest加密&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class=&quot;sect4&quot;&gt;
&lt;h5 id=&quot;常见算法-3&quot;&gt;常见算法&lt;/h5&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;RSA­MD5,&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;RSA­SHA­1&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;RSA­SHA­256&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;RSA­SHA­384&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;DSA (Digital Signature Algorithm: a US Government standard defined in FIPS­186 rev 4)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ECDSA (Elliptic Curve Digital Signature Algorithm defined in FIPS­186 rev 4).&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect4&quot;&gt;
&lt;h5 id=&quot;流程-5&quot;&gt;流程&lt;/h5&gt;
&lt;div class=&quot;imageblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;img src=&quot;/images/Digital-Signature.png&quot; alt=&quot;Digital Signature&quot;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</description>
        <pubDate>Tue, 10 May 2016 00:00:00 +0000</pubDate>
        <link>http://127.0.0.1:4000/blog/2016/05/Security-Notes</link>
        <guid isPermaLink="true">http://127.0.0.1:4000/blog/2016/05/Security-Notes</guid>
        
        
      </item>
    
      <item>
        <title>Keycloak installation guide</title>
        <description>&lt;div class=&quot;sect2&quot;&gt;
&lt;h3 id=&quot;keycloak-installation-guide&quot;&gt;1. Keycloak installation guide&lt;/h3&gt;
&lt;div id=&quot;toc&quot; class=&quot;toc&quot;&gt;
&lt;div id=&quot;toctitle&quot; class=&quot;title&quot;&gt;Table of Contents&lt;/div&gt;
&lt;ul class=&quot;sectlevel2&quot;&gt;
&lt;li&gt;&lt;a href=&quot;#keycloak-installation-guide&quot;&gt;1. Keycloak installation guide&lt;/a&gt;
&lt;ul class=&quot;sectlevel3&quot;&gt;
&lt;li&gt;&lt;a href=&quot;#安装基本环境-内存数据库-self-signed-cert&quot;&gt;1.1. 安装基本环境(内存数据库 + Self Signed Cert）&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#mysql配置&quot;&gt;1.2. MySQL配置&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#设置签名的密钥&quot;&gt;1.3. 设置签名的密钥&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#设置keycloak客户端&quot;&gt;1.4. 设置keycloak客户端&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#参考资料&quot;&gt;1.5. 参考资料&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;安装基本环境-内存数据库-self-signed-cert&quot;&gt;1.1. 安装基本环境(内存数据库 + Self Signed Cert）&lt;/h4&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;安装java8&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;设置JAVA_HOME&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;下载keycloak解压&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;根据官方文档设置HTTPS &lt;a href=&quot;https://keycloak.github.io/docs/userguide/keycloak-server/html/server-installation.html#d4e360&quot;&gt;3.2.7. SSL/HTTPS Setup&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;3.2.7.1.1.1. Self Signed Certificate&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;3.2.7.1.2. Installing the keystore to WildFly&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;增加admin账号&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre class=&quot;highlight&quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;[root@VMcentos ~] # bin/add-user.sh -r master -u admin
Press ctrl-d (Unix) or ctrl-z (Windows) to exit
Password: Added &#39;admin&#39; to &#39;/data/keycloak-1.9.2.Final/standalone/configuration/keycloak-add-user.json&#39;, restart server to load user&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;mysql配置&quot;&gt;1.2. MySQL配置&lt;/h4&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;下载mysql connect解压获取jar文件&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;安装mysql-connector, 根据这篇文章:  &lt;a href=&quot;http://giordanomaestro.blogspot.tw/2015/02/install-jdbc-driver-on-wildfly.html&quot;&gt;Install Mysql JDBC Driver on WildFly&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;设置mysql连接vim standalone/configuration/standalone.xml&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre class=&quot;highlight&quot;&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&amp;lt;datasource jndi-name=&quot;java:jboss/datasources/KeycloakDS&quot; pool-name=&quot;KeycloakDS&quot; enabled=&quot;true&quot; use-java-context=&quot;true&quot;&amp;gt;
    &amp;lt;connection-url&amp;gt;jdbc:mysql://127.0.0.1:3306/keycloak?useUnicode=true&amp;amp;amp;characterEncoding=UTF-8&amp;lt;/connection-url&amp;gt;
    &amp;lt;driver&amp;gt;mysql&amp;lt;/driver&amp;gt;
    &amp;lt;security&amp;gt;
        &amp;lt;user-name&amp;gt;keycloak&amp;lt;/user-name&amp;gt;
        &amp;lt;password&amp;gt;keycloak1&amp;lt;/password&amp;gt;
    &amp;lt;/security&amp;gt;
&amp;lt;/datasource&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;设置签名的密钥&quot;&gt;1.3. 设置签名的密钥&lt;/h4&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;生成私钥和csr:&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre&gt;[root@VMcentos ~]  openssl req -newkey rsa:2048 -keyout keycloak.example.com.key -out keycloak.example.com.csr&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;到StartSSL认证，获得一个OtherServer，里面有：&lt;/p&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;1_Intermediate.crt&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;2_keycloak.example.com.crt&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;导入keycloak&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre class=&quot;highlight&quot;&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;[root@VMcentos ~] 　openssl pkcs12 -export -in 2_keycloak.example.com.crt -inkey ../source/keycloak.example.com.key -certfile 1_Intermediate.crt -name &quot;keycloak.example.com&quot; -out keystore.p12

[root@VMcentos ~]  /opt/jdk8/bin/keytool -importkeystore -srckeystore keystore.p12 -srcstoretype pkcs12 -destkeystore keystore.jks -deststoretype JKS&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;设置keycloak客户端&quot;&gt;1.4. 设置keycloak客户端&lt;/h4&gt;
&lt;div class=&quot;paragraph&quot;&gt;
&lt;p&gt;在keycloak.json总增加，否则需要导入truststore，有expired time等麻烦&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&quot;disable-trust-manager&quot;: true&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class=&quot;listingblock&quot;&gt;
&lt;div class=&quot;content&quot;&gt;
&lt;pre class=&quot;highlight&quot;&gt;&lt;code class=&quot;language-json&quot; data-lang=&quot;json&quot;&gt;{
  &quot;realm&quot;: &quot;master&quot;,
  &quot;realm-public-key&quot;: &quot;....&quot;,
  &quot;auth-server-url&quot;: &quot;https://keycloak.example.com:8443/auth&quot;,
  &quot;ssl-required&quot;: &quot;external&quot;,
  &quot;resource&quot;: &quot;4399_ebook_server&quot;,
  &quot;public-client&quot;: true,
  &quot;use-resource-role-mappings&quot;: true,
  &quot;disable-trust-manager&quot;: true
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sect3&quot;&gt;
&lt;h4 id=&quot;参考资料&quot;&gt;1.5. 参考资料&lt;/h4&gt;
&lt;div class=&quot;ulist&quot;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https://upload.wikimedia.org/wikipedia/commons/9/96/Usage-of-Digital-Certificate.svg&quot;&gt;CA颁发流程&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https://www.sslshopper.com/article-most-common-openssl-commands.html&quot;&gt;常见openssl命令&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https://keycloak.github.io/docs/userguide/keycloak-server/html/&quot;&gt;keycloak文档&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https://keycloak.github.io/docs/userguide/keycloak-server/html/ch08.html#spring-security-adapter&quot;&gt;keycloak.json设置&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</description>
        <pubDate>Tue, 10 May 2016 00:00:00 +0000</pubDate>
        <link>http://127.0.0.1:4000/blog/2016/05/Keycloak-installation-guide</link>
        <guid isPermaLink="true">http://127.0.0.1:4000/blog/2016/05/Keycloak-installation-guide</guid>
        
        
      </item>
    
  </channel>
</rss>
